---
title: Changes in PrestaShop 8.0
menuTitle: Changes in 8.0
---

<style>
/* condensed lists in this article */
#body-inner li, #body-inner li ul, li p { margin-bottom: 0.2rem}
/* deprecation indicators */
#body-inner depre {font-size: 85%; color: #666; font-style: italic; vertical-align: middle }
#body-inner depre::before {content: ' – '}
</style>

# Notable changes in PrestaShop 8.0

## PHP support

PrestaShop 8.0 adds supports for PHP 8.0 and requires at least PHP 7.2.5.

## Notable changes

* Javascript files for migrated pages in the Back Office [now are written in TypeScript](https://github.com/PrestaShop/PrestaShop/pull/23221) (related change: [#24791](https://github.com/PrestaShop/PrestaShop/pull/24791)).
* Support for [legacy translation dictionaries][legacy-translation] (eg: `en.php`, `fr.php`..., deprecated in 1.7), [has been removed](https://github.com/PrestaShop/PrestaShop/pull/24401) from Core controllers. Only modules can still use this system now.
* All modules present in the `modules` directory during the installation process will be installed by default. Modules can use `Module::postInstall()` to execute code after the shop installation is done ([Read more](https://github.com/PrestaShop/PrestaShop/pull/24676)).
* Twig has been updated to version 3. Deprecated features from [v1](https://twig.symfony.com/doc/1.x/deprecated.html) & [v2](https://twig.symfony.com/doc/2.x/deprecated.html) are no longer available.
* All upgrade scripts have been [removed from the Core](https://github.com/PrestaShop/PrestaShop/pull/25794) and moved to the [Upgrade module](https://github.com/PrestaShop/autoupgrade).
* Using a hook alias will trigger a deprecation notice.

### Symfony update

Symfony has been [upgraded to 4.4](https://github.com/PrestaShop/PrestaShop/pull/24609), which includes a number of changes:
* The namespace `Csa\Bundle\GuzzleBundle\CsaGuzzleBundle` has been replaced by `EightPoints\Bundle\GuzzleBundle\EightPointsGuzzleBundle`.
* Doctrine ORM cache adapters for Memcache & APC are not available anymore. [The way cache is handled changed in Symfony 4.4](https://symfony.com/doc/4.4/reference/configuration/doctrine.html#caching-drivers) and [memcache & apc are not part of the new available caching methods](https://symfony.com/doc/4.4/cache.html).
* Services that are not dependency injected and that are not declared as "public" are removed from the container
* `ChoiceType`'s option "choices_as_values" doesn't exist anymore, it was previously already true by default
* It's not possible to call `Form::isValid()` if `Form::isSubmitted()` was not called before
* The syntax `bundlename:path:file.html.twig` is now invalid, use `@bundlename/path/to/file.html.twig`
* Syntax for `_controller` in routes should not use the short notation anymore (`PrestaShopBundle:Admin/Error:enableDebugMode` for instance), use the full path instead: `PrestaShopBundle\Controller\Admin\ErrorController::enableDebugModeAction`
* Translation files have been moved from `/app/Resources/translations/` to `/translations/`
* The annotation `@AdminSecurity is_granted()` should not take an array, use explicit `&&` or `||` when checking multiple rights
* Form type extensions should stop implementing `public function getExtendedType()` and implement `public static function getExtendedTypes(): iterable` instead ([read more](https://symfony.com/blog/new-in-symfony-4-2-improved-form-type-extensions)).

### New product page

[To be completed]

### Themes

Themes using jQuery UI tooltips might need to be updated to use bootstrap's tooltips ([read more](https://github.com/PrestaShop/PrestaShop/pull/25818));

#### Child themes

The `use_parent_assets` setting in `theme.yml`, when set to `true`, makes the child theme load its parent's assets (css, img and js) instead of its own. This feature, not functional and ignored in 1.7, [has been fixed and improved](https://github.com/PrestaShop/PrestaShop/issues/25667) for 8.0. For further fine-tuning, a new set of `child_*_url` variables is made available when the feature is active, allowing theme developers to access the parent and child's asset urls separately.

To maintain the behavior of 1.7 and load the child theme's assets, `use_parent_assets` must be set to `false`.

### Back office interface

The Bootstrap version used in Symfony-based Back office pages has been updated from 4.0 to 4.4. The following dependencies, not used by the Back office directly, [have been removed](https://github.com/PrestaShop/PrestaShop/pull/25917):

* bootstrap-slider
* compass
* mobile-detect
* sprintf-js
* tether

## API Changes

### Public interface

* `_PS_USE_SQL_SLAVE_` is now a boolean (`false` by default).

* `Alias`
  - `__construct()` - The 4th parameter, `$idLang`, has been removed _(deprecated in 1.7.0)_.

* `Attribute`
  - Renamed to `ProductAttribute`.

* `Product`
  - `$advanced_stock_management` is now `bool` instead if `int`.

* `Tools`
  - `addonsRequest()` - The values `partner`, `service`, `hosted_module`, `must-have-themes`, `customer_themes` and `native_all` are no longer supported.

* `WebserviceOutputInterface`
  - 3 public methods have been added to this interface ([read more](https://github.com/PrestaShop/PrestaShop/pull/26164)).

* `PrestaShop\PrestaShop\Adapter\Attachment\AttachmentRepository`
  - `__construct()` now takes two parameters.

* `PrestaShop\PrestaShop\Adapter\Customer\QueryHandler\SearchCustomersHandler`
  - `__construct()` - This method [now takes one parameter](https://github.com/PrestaShop/PrestaShop/pull/23889).

* `PrestaShop\PrestaShop\Adapter\Debug`
  - `__construct()` now takes an additional parameter `ClassIndexCacheClearer $classIndexCacheClearer`.

* `PrestaShop\PrestaShop\Adapter\Employee\EmployeeFormAccessChecker`
  * `__construct()` the 3rd parameter `$tabRepository` has been removed.

* `PrestaShop\PrestaShop\Adapter\MailTemplate\MailTemplateTwigRenderer`
  - `__construct()` now takes `Twig\Environment` instead of `Symfony\Component\Templating\EngineInterface`.

* `PrestaShop\PrestaShop\Adapter\Webservice\WebserviceConfiguration`
  - This class is now a subtype of `PrestaShop\PrestaShop\Core\Configuration\AbstractMultistoreConfiguration`.
  - `__construct()` - This method [now takes two additional parameters], `Context $shopContext` and `FeatureInterface $multistoreFeature`.

* `PrestaShop\PrestaShop\Core\Addon\Module\ModuleInterface` is now strictly typed.

* `PrestaShop\PrestaShop\Core\Domain\Attachment\QueryResult\AttachmentInformation`
  * This class now expects (and contains) localized values for names. It also contains localized description and size.
  * `getType()` has been renamed to `getMimeType()`.

* `PrestaShop\PrestaShop\Core\Domain\Customer\QueryResult\PersonalInformation`
  - `__construct()` -  The type of parameter `$rankBySales` is now `int` instead of `string`.
  - `getRankBySales()` now returns `int` instead of `string`.

* `PrestaShop\PrestaShop\Core\Domain\Order\QueryResult\OrderReturnForViewing`
  - `__construct()` - The parameters `$carrierId`, `$trackingUrl` and `$trackingNumber` have been removed and replaced by `string $orderReturnNumber`.

* `PrestaShop\PrestaShop\Core\Domain\Product\Command\RemoveAllAssociatedProductAttachmentsCommand`
  - Renamed to `PrestaShop\PrestaShop\Core\Domain\Product\Attachment\Command\RemoveAllAssociatedProductAttachmentsCommand`.

* `PrestaShop\PrestaShop\Core\Domain\Product\Command\SetAssociatedProductAttachmentsCommand`
  - Renamed to `PrestaShop\PrestaShop\Core\Domain\Product\Attachment\Command\SetAssociatedProductAttachmentsCommand`.

* `PrestaShop\PrestaShop\Core\Domain\Product\QueryResult\ProductForEditing`
  * `__construct()` expects an array of `AttachmentInformation` instead of an array of attachment IDs.

* `PrestaShop\PrestaShop\Core\Email\SwiftMailerValidation`
  - `isValid()` is now strictly typed.
  - `getError()` is now strictly typed.
  - `getWarnings()` is now strictly typed. 

* `PrestaShop\PrestaShop\Core\Exception\NonASCIIInLocalPartException`
  - This class is now a subtype of `CoreException` instead of `Egulias\EmailValidator\Exception\InvalidEmail`.

* `PrestaShop\PrestaShop\Core\Form\IdentifiableObject\DataHandler\ManufacturerFormDataHandler`
  - `__construct()` - The second parameter [is now](https://github.com/PrestaShop/PrestaShop/pull/24823) `ManufacturerImageUploader` instead of `ImageUploaderInterface`.

* `PrestaShop\PrestaShop\Core\Form\IdentifiableObject\DataProvider\CategoryFormDataProvider`
  - `__construct()` now takes a `GroupDataProvider` instead of a `DefaultGroupsProviderInterface`.

* `PrestaShop\PrestaShop\Core\Grid\Definition\Factory\LogGridDefinitionFactory`
  * `__construct()` now takes a second constructor parameter: `string $contextDateFormat`.

* `PrestaShopBundle\Controller\Admin\Sell\Customer\CustomerController`
  - `toggleStatusAction()` now returns `JsonResponse` instead of `RedirectResponse`.
  - `toggleNewsletterSubscriptionAction()` now returns `JsonResponse` instead of `RedirectResponse`.
  - `togglePartnerOfferSubscriptionAction()` now returns `JsonResponse` instead of `RedirectResponse`.

* `PrestaShopBundle\Controller\Admin\TranslationsController`
  - Renamed to `PrestaShopBundle\Controller\Admin\Improve\International\TranslationsController`.

* `PrestaShopBundle\Install\Install`
  - `getModulesList()` has been renamed to `getModulesOnDisk()`.

* `PrestaShopBundle\Command\AppendConfigurationFileHooksListCommand`
  - `__construct()` now takes 9 parameters.

* `PrestaShopBundle\Command\AppendHooksListForSqlUpgradeFileCommand`
  - `__construct()` now takes 10 parameters.

* `PrestaShopBundle\Command\CheckTranslationDuplicatesCommand`
  - `__construct()` now takes a `TranslatorBagInterface`.

* `PrestaShopBundle\Command\ExportThemeCommand`
  - `__construct()` now takes 3 parameters.

* `PrestaShopBundle\Command\GenerateMailTemplatesCommand`
  - `__construct()` now takes 2 parameters.

* `PrestaShopBundle\Command\LegacyLinkLinterCommand`
  - `__construct()` now takes 2 parameters.

* `PrestaShopBundle\Command\ListCommandsAndQueriesCommand`
  - `__construct()` now takes 2 parameters.

* `PrestaShopBundle\Command\ModuleCommand`
  - `__construct()` now takes 4 parameters.

* `PrestaShopBundle\Command\NamingConventionLinterCommand`
  - `__construct()` now takes 2 parameters.

* `PrestaShopBundle\Command\SecurityAnnotationLinterCommand`
  - `__construct()` now takes 2 parameters.

* `PrestaShopBundle\Command\ThemeEnablerCommand`
  - `__construct()` now takes a `ThemeManager` parameter.

* `PrestaShopBundle\Command\UpdateEUTaxruleGroupsCommand`
  - `__construct()` now takes a `string $localizationPath` parameter.

* `PrestaShopBundle\Command\UpdateSchemaCommand`
  - `__construct()` now takes 3 parameters.

* `PrestaShopBundle\Service\Grid\ResponseBuilder`
  - `__construct()` - This method [now has 3 additional parameters](https://github.com/PrestaShop/PrestaShop/pull/21420).
  
### Removals

#### Removed methods

* `translate()` <depre>deprecated in 1.5.4</depre>
* `AddressFormat::_getFormatDB()`
* `AdminModulesController::ajaxProcessRefreshModuleList()`
* `CartRule::checkProductRestrictions()` <depre>deprecated in 1.7.4</depre>
* `Category::_subTree()` <depre>deprecated in 1.7.0</depre>
* `Category::getShopID()` <depre>deprecated in 1.7.0</depre>
* `Category::getUrlRewriteInformations()` <depre>deprecated in 1.7.0</depre>
* `Category::getCategoryInformations()` <depre>deprecated in 1.7.0</depre>
* `CmsCategory::searchByNameAndParentCMSCategoryId()` <depre>deprecated in 1.5.3</depre>
* `Hook::getHookAliasList()` <depre>deprecated in 1.7.1</depre>
* `Hook::getRetroHookName()` <depre>deprecated in 1.7.1</depre>
* `PrestaShop\PrestaShop\Adapter\Employee\EmployeeFormAccessChecker::canAccessAddonsConnect()`
* `PrestaShop\PrestaShop\Adapter\Module\AdminModuleDataProvider::clearModuleListCache()`
* `PrestaShop\PrestaShop\Core\Addon\Module::setPrestaTrustChecker()`
* `PrestaShop\PrestaShop\Core\Employee\Access\EmployeeFormAccessCheckerInterface::canAccessAddonsConnect()`
* `PrestaShopBundle\Controller\Admin\Improve\ModuleController::catalogAction()`
* `PrestaShopBundle\Controller\Admin\Improve\ModuleController::getPreferredModulesAction()`
* `PrestaShopBundle\Controller\Admin\Improve\ModuleController::refreshCatalogAction()`
* `PrestaShopBundle\Install\Install::getAddonsModulesList()`
* `process::processInstallAddonsModules()` (from `install-dev/controllers/console/process.php`)
* `process::processInstallAddonsModules()` (from `install-dev/controllers/http/process.php`)
* `Translate::getGenericAdminTranslation()`
* `PrestaShop\PrestaShop\Core\Domain\Order\QueryResult\OrderReturnForViewing::getCarrierId()`
* `PrestaShop\PrestaShop\Core\Domain\Order\QueryResult\OrderReturnForViewing::getTrackingUrl()`
* `PrestaShop\PrestaShop\Core\Domain\Order\QueryResult\OrderReturnForViewing::getTrackingNumber()`

#### Removed variables

* `$_LANGADM`
* `$timer_start`
* `AdminController::$timer_start`

#### Removed constants

* `_PS_SMARTY_DIR_`
* `PhpEncryption::LEGACY_ENGINE`
* `Module::CACHE_FILE_DEFAULT_COUNTRY_MODULES_LIST`
* `Module::CACHE_FILE_CUSTOMER_MODULES_LIST`
* `Module::CACHE_FILE_MUST_HAVE_MODULES_LIST`

#### Removed classes

* `PhpEncryptionLegacyEngine`
* `PrestaShop\PrestaShop\Adapter\Module\PrestaTrust` (whole namespace)
* `PrestaShop\PrestaShop\Core\Domain\Attachment\Query\GetAttachmentInformationList`
* `PrestaShop\PrestaShop\Core\Domain\Product\Command\AssociateProductAttachmentCommand`
* `PrestaShopBundle\Cache\Factory\CacheSubscriberFactory`
* `PrestaShopBundle\Cache\ModuleTemplateCacheWarmer`
* `PrestaShopBundle\Controller\Admin\Improve\Design\ThemeCatalogController`
* `PrestaShopBundle\Controller\Admin\Improve\Modules\AddonsStoreController`
* `PrestaShopBundle\DependencyInjection\Compiler\OverrideTwigServiceCompilerPass`
* `PrestaShopBundle\Form\Admin\Configure\AdvancedParameters\RequestSql\SqlRequestFormDataProvider`
* `PrestaShopBundle\Form\Admin\Configure\AdvancedParameters\RequestSql\SqlRequestFormHandler`
* `PrestaShopBundle\Form\Admin\Type\AddonsConnectType`
* `PrestaShopBundle\Install\Upgrade`
* `PrestaShopBundle\Service\DataProvider\Marketplace\ApiClient`
* `PrestaShopBundle\Twig\AdminExtension`
* `PrestaShopBundle\Twig\Locator\ModuleTemplateIterator`

#### Removed routes

* `admin_module_addons_store`
* `admin_module_catalog`
* `admin_module_catalog_post`
* `admin_module_catalog_refresh`

#### Removed services

* `guzzle.cache`

#### Removed endpoints

* `admin-dev/ajax-tab.php` <depre>deprecated in 1.7.6</depre>

#### Removed libraries

* `paragonie/random_compat`

## Behavior changes

* `AdminController::l()` no longer falls back to admin / legacy module translations (this is done in `ModuleAdminController` now)
* `Module::getModuleNameFromClass()` no longer produces side effects (i.e. it no longer loads the module's translations)
* `Translate::getAdminTranslation()` is now a wrapper to `Context::getContext()->getTranslator()->trans()` and it no longer attempts to translate using module translations.
* `Translate::getModuleTranslation()` no longer falls back to admin translations

## Deprecations

* `ApiClient::setSslVerification()` → Configure the client passed in the constructor directly
* `Tools::safePostVars()` → Avoid using this method
* `Translate::getAdminTranslation()` → Use `Context::getContext()->getTranslator()->trans()`

## Changes in the classic theme

* `checkout/_partials/steps/payment.tpl`
  * The ID `payment-form` has [been changed](https://github.com/PrestaShop/PrestaShop/pull/25069) to `payment-{$option.id}-form`.

## Updated dependencies

### PHP dependencies

| Dependency name            | Old version  | New version    |
|----------------------------|--------------|----------------|
| cssjanus/cssjanus          | 1.2 (forked) | 2.1 (official) |
| egulias/email-validator    | 2.1          | 3.1            |
| guzzlehttp/guzzle          | 5.3          | 7.3            |
| prestashop/circuit-breaker | 3.0          | 4.0            |


[legacy-translation]: {{< relref "8/modules/creation/module-translation/classic-system" >}}
[new-translation]: {{< relref "8/modules/creation/module-translation/new-system" >}}
